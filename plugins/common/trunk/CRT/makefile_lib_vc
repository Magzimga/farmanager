OBJDIR = VC
OUTDIR = ..
DLLNAME = libCRT.lib

LINK_OBJS = $(OBJDIR)\ctype.obj \
$(OBJDIR)\delete.obj \
$(OBJDIR)\delete_array.obj \
$(OBJDIR)\free.obj \
$(OBJDIR)\i64toa.obj \
$(OBJDIR)\malloc.obj \
$(OBJDIR)\memchr.obj \
$(OBJDIR)\memcmp.obj \
$(OBJDIR)\memcpy.obj \
$(OBJDIR)\memicmp.obj \
$(OBJDIR)\memmove.obj \
$(OBJDIR)\memset.obj \
$(OBJDIR)\new.obj \
$(OBJDIR)\new_array.obj \
$(OBJDIR)\realloc.obj \
$(OBJDIR)\strchr.obj \
$(OBJDIR)\strcspn.obj \
$(OBJDIR)\strdup.obj \
$(OBJDIR)\strncat.obj \
$(OBJDIR)\strncmp.obj \
$(OBJDIR)\strpbrk.obj \
$(OBJDIR)\strrchr.obj \
$(OBJDIR)\strstr.obj \
$(OBJDIR)\strtok.obj \
$(OBJDIR)\strtol.obj


CPP_PROJ=/nologo /c /J /O1 /Gr /GR- /EHs-c- /LD /Fo"$(OBJDIR)\\"
LINK_FLAGS=/nologo /machine:i386 /nodefaultlib /out:"$(OUTDIR)\$(DLLNAME)"

ALL: $(OBJDIR) $(OUTDIR)\$(DLLNAME)

$(OUTDIR)\$(DLLNAME) : $(LINK_OBJS)
	lib @<<
	$(LINK_FLAGS) $(LINK_OBJS)
<<

.cpp{$(OBJDIR)}.obj::
	cl @<<
	$(CPP_PROJ) $<
<<

$(OBJDIR)\ctype.obj: ctype.cpp crt.hpp
$(OBJDIR)\delete.obj: delete.cpp crt.hpp
$(OBJDIR)\delete_array.obj: delete_array.cpp crt.hpp
$(OBJDIR)\free.obj: free.cpp crt.hpp
$(OBJDIR)\i64toa.obj: i64toa.cpp crt.hpp
$(OBJDIR)\malloc.obj: malloc.cpp crt.hpp
$(OBJDIR)\memchr.obj: memchr.cpp crt.hpp
$(OBJDIR)\memcmp.obj: memcmp.cpp crt.hpp
$(OBJDIR)\memcpy.obj: memcpy.cpp crt.hpp
$(OBJDIR)\memicmp.obj: memicmp.cpp crt.hpp
$(OBJDIR)\memmove.obj: memmove.cpp crt.hpp
$(OBJDIR)\memset.obj: memset.cpp crt.hpp
$(OBJDIR)\new.obj: new.cpp crt.hpp crt.hpp
$(OBJDIR)\new_array.obj: new_array.cpp crt.hpp
$(OBJDIR)\realloc.obj: realloc.cpp crt.hpp
$(OBJDIR)\strchr.obj: strchr.cpp crt.hpp
$(OBJDIR)\strcspn.obj: strcspn.cpp crt.hpp
$(OBJDIR)\strdup.obj: strdup.cpp crt.hpp
$(OBJDIR)\strncat.obj: strncat.cpp crt.hpp
$(OBJDIR)\strncmp.obj: strncmp.cpp crt.hpp
$(OBJDIR)\strpbrk.obj: strpbrk.cpp crt.hpp
$(OBJDIR)\strrchr.obj: strrchr.cpp crt.hpp
$(OBJDIR)\strstr.obj: strstr.cpp crt.hpp
$(OBJDIR)\strtok.obj: strtok.cpp crt.hpp
$(OBJDIR)\strtol.obj: strtol.cpp crt.hpp

$(OBJDIR):
	@if not exist "$(OBJDIR)\$(NULL)" mkdir "$(OBJDIR)"
